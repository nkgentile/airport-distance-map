(function(r){function t(t){for(var a,s,o=t[0],c=t[1],u=t[2],p=0,h=[];p<o.length;p++)s=o[p],n[s]&&h.push(n[s][0]),n[s]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(r[a]=c[a]);l&&l(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var r,t=0;t<i.length;t++){for(var e=i[t],a=!0,o=1;o<e.length;o++){var c=e[o];0!==n[c]&&(a=!1)}a&&(i.splice(t--,1),r=s(s.s=e[0]))}return r}var a={},n={app:0},i=[];function s(t){if(a[t])return a[t].exports;var e=a[t]={i:t,l:!1,exports:{}};return r[t].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=r,s.c=a,s.d=function(r,t,e){s.o(r,t)||Object.defineProperty(r,t,{enumerable:!0,get:e})},s.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},s.t=function(r,t){if(1&t&&(r=s(r)),8&t)return r;if(4&t&&"object"===typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var a in r)s.d(e,a,function(t){return r[t]}.bind(null,a));return e},s.n=function(r){var t=r&&r.__esModule?function(){return r["default"]}:function(){return r};return s.d(t,"a",t),t},s.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;i.push([0,"chunk-vendors"]),e()})({0:function(r,t,e){r.exports=e("56d7")},"1dc3":function(r,t,e){},"56d7":function(r,t,e){"use strict";e.r(t);e("cadf"),e("551c"),e("097d");var a=e("2b0e"),n=function(){var r=this,t=r.$createElement,e=r._self._c||t;return e("div",{staticClass:"mileage",attrs:{id:"app"}},[e("svg",{ref:"map",staticClass:"mileage-map",attrs:{width:"1200",height:"780",viewBox:"-120 -180 1200 780"}},[e("g",{ref:"states",staticClass:"mileage-map__states"}),e("g",{ref:"airports"},r._l(r.airports,function(t){return e("g",{staticClass:"airport",class:{"airport--current":t.current}},[e("circle",{staticClass:"airport__marker",attrs:{r:"3",cx:t.x,cy:t.y}}),e("circle",{staticClass:"airport__range",attrs:{r:"16",cx:t.x,cy:t.y},on:{mousemove:function(e){r.airportSnap(e,t)},mouseup:function(e){r.airportClick(e,t)},mouseleave:function(e){if(e.target!==e.currentTarget)return null;r.airportLeave(e,t)}}})])})),e("path",{staticClass:"marker-connector",attrs:{d:r.markerConnect()}}),e("g",{ref:"airplane",staticClass:"airplane"},[e("path",{staticClass:"airplane__icon",attrs:{d:"M21 15.984l-8.016-2.484v5.484l2.016 1.5v1.5l-3.516-0.984-3.469 0.984v-1.5l1.969-1.5v-5.484l-7.969 2.484v-1.969l7.969-5.016v-5.484c0-0.844 0.656-1.5 1.5-1.5s1.5 0.656 1.5 1.5v5.484l8.016 5.016v1.969z",transform:"translate(-8,-15) scale(1.2)"}})]),r._l(r.markers,function(t){return e("g",{staticClass:"marker",class:{"marker--current":t.current},attrs:{transform:"translate("+t.x+","+t.y+")"},on:{mousedown:function(e){r.markerSet(e,t)}}},[e("path",{attrs:{fill:t.fill,d:"M0 0l28.592-28.592c15.78-15.78 15.908-41.24.128-57.02a40.424 40.424 0 0 0-57.124 57.2z"}}),e("transition",{attrs:{name:"marker-fade"}},[t.airport?e("text",{attrs:{x:"0",y:"-42","text-anchor":"middle"},domProps:{textContent:r._s(t.airport.LocationID)}}):r._e()])],1)})],2),e("h1",{directives:[{name:"show",rawName:"v-show",value:r.distance,expression:"distance"}],staticClass:"mileage__calculations"},[e("span",[r._v(r._s(r._f("numberWithCommas")(r.distance)))]),e("small",[r._v("mi")])]),e("div",{staticClass:"mileage__instructions"},[r._v("Drag the markers around to calculate distance")])])},i=[],s=(e("ac6a"),e("a481"),e("6b54"),e("af59")),o=e("109c"),c={name:"app",data:function(){return{distance:null,airports:[],currentAirport:null,lastAirport:null,markers:[{airport:null,x:200,y:300,startX:0,startY:0,fill:"#f47825",current:!1},{airport:null,x:500,y:100,startX:0,startY:0,fill:"#00b26b",current:!1}]}},filters:{numberWithCommas:function(r){return r&&r.toString?r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):r}},mounted:function(){var r=this,t=s["geoAlbersUsa"]().scale([1500]);this.projection=t,fetch("https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/us-states.json").then(function(r){return r.json()}).then(function(e){var a=s["geoPath"]().projection(t);s["select"](r.$refs.states).selectAll("path").data(e.features).enter().append("path").attr("d",a)}),fetch("https://s3-us-west-2.amazonaws.com/s.cdpn.io/39255/airports.json").then(function(r){return r.json()}).then(function(e){e=e.slice(0,100);var a,n,i=e.length;while(i--)a=e[i],n=t([a.Lng,a.Lat]),n?(a.x=n[0],a.y=n[1]):e.splice(i,1);r.airports=e.reverse();var s=null;r.markers.forEach(function(t){var e=r.randomAirport();e==s&&(e=r.randomAirport()),s=e,t.airport=e,t.x=e.x,t.y=e.y}),r.markerDistance()})},methods:{randomAirport:function(){return this.airports[Math.floor(Math.random()*this.airports.length)]},markerSet:function(r,t){if(r&&r.preventDefault(),t=t||this.markers[0],t.airport=null,t.current=!0,t.startX=t.x,t.startY=t.y,this.currentAirport=null,this.currentMarker=t,this.airplaneTween){var e=this.airplaneTween,a=new o["a"];a.to(this.$refs.airplane,.2,{opacity:0,ease:"Linear.easeNone",onComplete:function(){e&&e.kill()}}),this.airplaneFade=a}this.markerDrag(r),document.addEventListener("mousemove",this.markerDrag),document.addEventListener("mouseup",this.markerStop),this.$refs.map.addEventListener("mouseleave",this.markerLeave)},markerDrag:function(r){if(this.currentMarker.airport=this.currentAirport,this.currentAirport)this.currentMarker.x=this.currentAirport.x,this.currentMarker.y=this.currentAirport.y;else{s["event"]=r;var t=s["mouse"](this.$refs.map);this.currentMarker.x=t[0],this.currentMarker.y=t[1]}this.markerDistance()},markerLeave:function(){this.currentMarker.x=this.currentMarker.startX,this.currentMarker.y=this.currentMarker.startY,this.markerStop()},markerStop:function(){console.log("stop!"),document.removeEventListener("mousemove",this.markerDrag),document.removeEventListener("mouseup",this.markerStop),this.$refs.map.removeEventListener("mouseleave",this.markerLeave),this.currentMarker.current=!1,this.currentMarker=null,this.markerDistance()},markerConnect:function(){var r=this.markers[1],t=this.markers[0];r.x<t.x&&(r=this.markers[0],t=this.markers[1]);var e=t.x-r.x,a=t.y-r.y,n=Math.sqrt(e*e+a*a);return"M"+t.x+","+t.y+"A"+n+","+n+" 0 0,1 "+r.x+","+r.y},calcDistance:function(r,t,e,a,n){var i=Math.PI*r/180,s=Math.PI*e/180,o=t-a,c=Math.PI*o/180,u=Math.sin(i)*Math.sin(s)+Math.cos(i)*Math.cos(s)*Math.cos(c);return u=Math.acos(u),u=180*u/Math.PI,u=60*u*1.1515,"K"==n&&(u*=1.609344),"N"==n&&(u*=.8684),u},markerDistance:function(){var r=this.markers[0],t=this.projection.invert([r.x,r.y]).reverse(),e=this.markers[1],a=this.projection.invert([e.x,e.y]).reverse();this.distance=Math.round(this.calcDistance(t[0],t[1],a[0],a[1])),this.airplaneAnimate()},airportSnap:function(r,t){t!==this.currentAirport&&(t.current=!0,this.currentAirport=t,this.currentMarker&&(this.currentMarker.airport=t))},airportClick:function(r,t){this.currentMarker||this.markerSet(r),this.currentAirport=t,this.currentMarker.x=this.currentAirport.x,this.currentMarker.y=this.currentAirport.y,this.currentMarker&&(this.currentMarker.airport=t)},airportLeave:function(r,t){t.current=!1,this.currentAirport=null,this.lastAirport=t},airplaneAnimate:function(){var r=this.markerConnect(),t=new o["b"]({repeat:-1,delay:-.2}),e=Math.min(this.distance/80,15),a=Math.min(.2*e,.3);this.airplaneFade&&this.airplaneFade.isActive()?(t.pause(),this.airplaneFade.eventCallback("onComplete",function(){t.play()})):this.airplaneTween&&this.airplaneTween.kill();var n=MorphSVGPlugin.pathDataToBezier(r);t.to(this.$refs.airplane,e,{bezier:{values:n,curviness:1,autoRotate:-90,type:"cubic"},reversed:!0,ease:Linear.easeNone},0),t.fromTo(this.$refs.airplane,a,{opacity:0},{opacity:1,delay:a/2,ease:"Linear.easeNone"},0),t.to(this.$refs.airplane,a,{opacity:0,ease:"Linear.easeNone"},"-="+a),this.airplaneTween=t}}},u=c,l=(e("7c55"),e("2877")),p=Object(l["a"])(u,n,i,!1,null,null,null);p.options.__file="App.vue";var h=p.exports,m=e("2f62");a["a"].use(m["a"]);var f=new m["a"].Store({state:{},mutations:{},actions:{}});e("1dc3");a["a"].config.productionTip=!1,new a["a"]({store:f,render:function(r){return r(h)}}).$mount("#app")},"7c55":function(r,t,e){"use strict";var a=e("d3dd"),n=e.n(a);n.a},d3dd:function(r,t,e){}});